# iOS客户端架构
> [iOS应用架构谈 开篇](https://casatwy.com/iosying-yong-jia-gou-tan-kai-pian.html)

#### 架构要考虑的事情(App)
  - 调用网络API  
    > 如何让业务开发工程师方便安全的调用网络API，然后尽可能保护用户在各种网络环境下都有良好的体验  

  - 页面展示  
    > 页面如何组织，才能尽可能降低业务方代码的耦合度，尽可能降低业务方开发界面的复杂度，提高效率  

  - 数据的本地持久化
    > 当数据有在本地存取的需求时，如何能够保证数据在本地的合理安排，尽可能的缩小性能消耗  

  - 动态部署方案  
    > iOS应用有审核期，如何能够通过不发版本的方式展示新的内容给用户，如何修复紧急BUG  

#### 架构要考虑的事情(团队)  
  - 收集用户数据，给产品和运营参考  
  - 合理的组织各业务方开发的业务模块，以及相关基础模块  
  - 每日app的自动打包，提供给QA工程师的测试工具  

### 主要讨论的问题
  1. 网络层设计方案，设计网络层是要考虑的问题，网络层优化的时候，可以从哪些方面入手  
  2. 页面的展示、调用和组织都有哪些设计方案，需要考虑哪些问题  
  3. 本地持久化的设计方案有哪些？优劣是什么？不同方案间要注意的问题分别是什么  
  4. 要实现动态部署，都有哪些方案？不同方案之间的优劣，侧重？

### 架构设计的方法
##### 第一步：搞清楚要解决哪些问题，并找到解决这些问题的充要条件    
 > tips: 传的参数越少，耦合度相对而言就与越小，替换模块或者升级模块所话费的代价就越小  

##### 第二步：问题分类，分模块  
##### 第三步：搞清楚各问题之间的依赖关系，建立好模块交流规范并设计模式  
关键在于建立一套统一的交流规范。这一步很能够体现架构师在软件方面的价值观，虽然存在一定程度上的好坏优劣（如胖Model和瘦Model）  
一定要建立一套同意的交流规范。
##### 第四步：推演预测一下未来可能的走向，必要时添加新的模块，记录更多的基础数据以备未来之用  
##### 第五步：先解决依赖关系中最基础的问题，实现基础模块，然后再用基础模块堆叠出整个架构  
##### 第六步：打点，跑单元测试，跑性能测试，根据数据去优化对应的地方  
需要遵循的原则：**自顶向下设计**(1,2,3,4步)，**自底向上实现**(5)，**先测量后优化**(6)

### 什么样的架构师是好架构师  
1. 每天学习  
2. 业务出身或者熟悉公司业务  
3. 熟悉软件工程的各种规范，踩过无数坑  
4. 及时承认错误    

### 什么样的架构叫好架构
