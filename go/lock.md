# [go中的锁](https://zhuanlan.zhihu.com/p/33462152)

#### 硬件原子操作
硬件的原子操作分为单核和多核(SMP)  
- 单核：一条指令就是原子的，中断只会发生在指令之间  
- 多核：多个核心同时运行，在一个核心访问内存时，改内存地址也可以被其他核心访问。所以CPU有一种机制，在指令执行的过程中，对总线进行加锁，这种加锁是硬件级别的，但是这样其他核心就不能通过通过总线访问内存了，粒度太粗，所以有一种方式是通过CPU缓存所来替代总线锁  

#### 软件原子操作  
软件原子操作是通过硬件原子操作的。比如golang中的sync/atomic  


### go中的锁  
常见的用于同步的方式有：  
- 原子操作  
- 互斥锁  
- 读写锁  
- waitgroup  
> 后三种都是依赖于**袁原子操作&信号量**，go中的信号量是在runtime包中实现的   

#### `runtime/sema`(信号量)  

