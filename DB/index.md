# 索引
> 索引是帮助MySQL高效获取数据的**排好序**的**数据结构**  

#### 索引数据结构
- 二叉树  
- 红黑树  
- Hash表  
- B-Tree  

##### 二叉树 ❌
有可能变成单边树  
导致毫无优化效果  
![binary tree](pics/bt.png)

##### 红黑树 ❌
红黑树是一个弱平衡二叉树，有个自平衡的过程  
但是红黑树的高度是个问题，无法控制，导致查询次数多（每次都load一层的数据进RAM）  
![red black tree](pics/rbt.png)  

##### Hash表
只需要一次io就可以确定记录  
用的很少，因为不适合范围查询  

##### B-Tree
- 叶节点具有相同的深度  
- 叶节点的指针为空  
- 节点中的数据索引从左到右递增排列  

##### B+Tree(B-Tree的变种)  
- 非叶子节点不存储data，只存储索引，可以放更多的索引，就有更多的分叉，就可以存储更多的索引元素  
- 叶子节点不存储指针  
- 顺序访问指针，提高区间访问的性能  
> mysql叶文件的大小默认是16K，也就是一个叶子节点能存储16条数据；在看非叶子节点，假设主键ID为bigint类型，那么长度是8B，指针大小在Innodb源码中为6B，一共就是14B，那么一页里就可以存储16K/ 14=1170个(主键+指针)    

![b+tree](pics/B+Tree.png)

